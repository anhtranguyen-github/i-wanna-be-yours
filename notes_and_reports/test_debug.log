2025-12-29 12:52:54,604 INFO hanachan.memory : Initializing MemoryManager Singleton...
2025-12-29 12:52:54,604 INFO hanachan.memory : MemoryManager: Background queue initialized.
2025-12-29 12:53:07,732 INFO memory.episodic : Connecting to Qdrant at localhost (127.0.0.1):6333
2025-12-29 12:53:07,923 INFO httpx : HTTP Request: GET http://127.0.0.1:6333 "HTTP/1.1 200 OK"
2025-12-29 12:53:07,935 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections "HTTP/1.1 200 OK"
2025-12-29 12:53:07,939 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections/episodic_memory "HTTP/1.1 200 OK"
2025-12-29 12:53:08,444 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:53:08,607 INFO memory.episodic : Connecting to Qdrant at localhost (127.0.0.1):6333
2025-12-29 12:53:08,975 INFO httpx : HTTP Request: GET http://127.0.0.1:6333 "HTTP/1.1 200 OK"
2025-12-29 12:53:08,986 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections "HTTP/1.1 200 OK"
2025-12-29 12:53:08,988 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections/resource_vectors "HTTP/1.1 200 OK"
2025-12-29 12:53:09,317 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:53:11,251 INFO hanachan.memory : MemoryManager: Live memory services are active.
2025-12-29 12:53:11,252 INFO services.llm_factory : ModelFactory: Using OpenAI (gpt-4-turbo)
2025-12-29 12:53:11,426 INFO services.llm_factory : ModelFactory: Using OpenAI (gpt-4-turbo)
2025-12-29 12:53:12,095 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:53:12,109 INFO httpx : HTTP Request: POST http://127.0.0.1:6333/collections/episodic_memory/points/query "HTTP/1.1 200 OK"
2025-12-29 12:53:12,126 INFO hanachan.memory : MemoryManager: Retrieval completed in 0.68s for user recalibrate-test-user
2025-12-29 12:53:13,393 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:53:13,407 INFO agent.core_agent : üõ†Ô∏è [Agent] Executing tool: generate_suggested_goals
2025-12-29 12:53:16,722 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:53:16,770 INFO hanachan.memory : MemoryManager: Enqueued background task b831c421-beeb-4115-a0b0-f5f3781bf99b for session recalibrate-session
2025-12-29 12:53:17,190 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:53:17,202 INFO httpx : HTTP Request: POST http://127.0.0.1:6333/collections/episodic_memory/points/query "HTTP/1.1 200 OK"
2025-12-29 12:53:17,222 INFO hanachan.memory : MemoryManager: Retrieval completed in 0.45s for user recalibrate-test-user
2025-12-29 12:53:18,610 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:53:18,613 INFO agent.core_agent : üõ†Ô∏è [Agent] Executing tool: recalibrate_study_priorities
2025-12-29 12:53:24,283 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:53:24,286 INFO hanachan.memory : MemoryManager: Enqueued background task fb638fe7-c197-4a9e-a5b3-284e1b9d4853 for session recalibrate-session
F
======================================================================
FAIL: test_recalibration_workflow (__main__.TestMemoryRecalibrationWorkflow.test_recalibration_workflow)
Verify that the agent:
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.12/unittest/mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/tra01/OneDrive/Desktop/Last dance/hanabira.org/backend/hanachan/test/workflows/workflow_memory_recalibration.py", line 112, in test_recalibration_workflow
    self.assertTrue(batch_call_found, "Expected a POST call to /batch for recalibration")
AssertionError: False is not true : Expected a POST call to /batch for recalibration

----------------------------------------------------------------------
Ran 1 test in 28.142s

FAILED (failures=1)

--- PHASE 1: Identifying Struggles ---
ü§ñ Agent: Here are some tailored goals for today's study session, focusing on areas that you've found challenging:

1. **Intensive Review of Particle Logic**: Dive deep into the logic and usage of Japanese particles. Understanding their roles will help in constructing more accurate sentences.
2. **Practice Quiz**: Aim to complete at least one practice quiz and score above 80%. This will test your understanding and retention of the material.
3. **Kanji Review**: Go over 5 kanji characters that have been difficult for you in the past. Focus on their readings and meanings.

Would you like to start with any specific task, or should I create some materials to help you with these goals?

--- PHASE 2: Recalibrating ---
ü§ñ Agent: Your study plan has been updated to prioritize tasks related to particles and passive forms. This should help you address these areas more effectively. If you need specific exercises or explanations on these topics, just let me know!
