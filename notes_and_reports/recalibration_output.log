2025-12-29 12:53:51,959 INFO hanachan.memory : Initializing MemoryManager Singleton...
2025-12-29 12:53:51,960 INFO hanachan.memory : MemoryManager: Background queue initialized.
2025-12-29 12:54:07,816 INFO memory.episodic : Connecting to Qdrant at localhost (127.0.0.1):6333
2025-12-29 12:54:08,129 INFO httpx : HTTP Request: GET http://127.0.0.1:6333 "HTTP/1.1 200 OK"
2025-12-29 12:54:08,152 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections "HTTP/1.1 200 OK"
2025-12-29 12:54:08,161 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections/episodic_memory "HTTP/1.1 200 OK"
2025-12-29 12:54:08,700 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:54:09,197 INFO memory.episodic : Connecting to Qdrant at localhost (127.0.0.1):6333
2025-12-29 12:54:09,513 INFO httpx : HTTP Request: GET http://127.0.0.1:6333 "HTTP/1.1 200 OK"
2025-12-29 12:54:09,524 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections "HTTP/1.1 200 OK"
2025-12-29 12:54:09,527 INFO httpx : HTTP Request: GET http://127.0.0.1:6333/collections/resource_vectors "HTTP/1.1 200 OK"
2025-12-29 12:54:09,855 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:54:11,766 INFO hanachan.memory : MemoryManager: Live memory services are active.
2025-12-29 12:54:11,766 INFO services.llm_factory : ModelFactory: Using OpenAI (gpt-4-turbo)
2025-12-29 12:54:11,974 INFO services.llm_factory : ModelFactory: Using OpenAI (gpt-4-turbo)
2025-12-29 12:54:12,314 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:54:12,322 INFO httpx : HTTP Request: POST http://127.0.0.1:6333/collections/episodic_memory/points/query "HTTP/1.1 200 OK"
2025-12-29 12:54:12,335 INFO hanachan.memory : MemoryManager: Retrieval completed in 0.34s for user recalibrate-test-user
2025-12-29 12:54:14,177 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:54:14,183 INFO agent.core_agent : üõ†Ô∏è [Agent] Executing tool: generate_suggested_goals
2025-12-29 12:54:21,892 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:54:21,928 INFO hanachan.memory : MemoryManager: Enqueued background task b881233d-53b3-4062-b8d7-3f148a4fbe31 for session recalibrate-session
2025-12-29 12:54:22,256 INFO httpx : HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-12-29 12:54:22,289 INFO httpx : HTTP Request: POST http://127.0.0.1:6333/collections/episodic_memory/points/query "HTTP/1.1 200 OK"
2025-12-29 12:54:22,321 INFO hanachan.memory : MemoryManager: Retrieval completed in 0.39s for user recalibrate-test-user
2025-12-29 12:54:23,445 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:54:23,449 INFO agent.core_agent : üõ†Ô∏è [Agent] Executing tool: recalibrate_study_priorities
2025-12-29 12:54:25,756 INFO httpx : HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 12:54:25,761 INFO hanachan.memory : MemoryManager: Enqueued background task 009d92e9-9685-4662-acbf-7174521360f0 for session recalibrate-session
F
======================================================================
FAIL: test_recalibration_workflow (__main__.TestMemoryRecalibrationWorkflow.test_recalibration_workflow)
Verify that the agent:
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.12/unittest/mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/tra01/OneDrive/Desktop/Last dance/hanabira.org/backend/hanachan/test/workflows/workflow_memory_recalibration.py", line 112, in test_recalibration_workflow
    self.assertTrue(batch_call_found, "Expected a POST call to /batch for recalibration")
AssertionError: False is not true : Expected a POST call to /batch for recalibration

----------------------------------------------------------------------
Ran 1 test in 31.797s

FAILED (failures=1)

--- PHASE 1: Identifying Struggles ---
ü§ñ Agent: For today's study session, I recommend focusing on the following areas:

1. **Intensive Review of Particles Logic**: Since you've had persistent difficulties with particles, let's focus on understanding their logic and usage in sentences. This should help improve your sentence structuring skills in Japanese.

2. **Complete 1 Practice Quiz**: Aim to score above 80% on a practice quiz that includes questions on particles and passive forms. This will help reinforce your understanding and give you immediate feedback on your progress.

3. **Review 5 Kanji**: Review five kanji characters that you've previously struggled with. This will not only enhance your kanji recognition skills but also your overall reading and comprehension abilities.

Would you like to start with any specific task, or should I create some resources to assist you with these goals?

--- PHASE 2: Recalibrating ---
ü§ñ Agent: I've recalibrated your study plan to prioritize "particles" and the "passive form". These topics will now receive more focus in your upcoming sessions to help you master them more effectively. If you have any specific questions or need further adjustments, feel free to let me know!
