<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat | Professional Interface</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <button id="new-chat-btn" class="btn-primary-icon">
                    <span class="material-icons-round">add</span>
                    <span>New Chat</span>
                </button>
            </div>

            <div class="sidebar-content">
                <!-- Accordion Item: History -->
                <div class="accordion-item active" id="history-accordion">
                    <div class="accordion-header" onclick="toggleAccordion('history-accordion')">
                        <span class="header-title">Chat History</span>
                        <span class="material-icons-round arrow-icon">expand_more</span>
                    </div>
                    <div class="accordion-body">
                        <div style="padding: 0 var(--space-sm) var(--space-sm) var(--space-sm);">
                            <input type="text" id="history-search" placeholder="Search history..."
                                style="width: 100%; padding: 8px; border-radius: var(--radius-sm); border: 1px solid var(--border-subtle); background: var(--bg-app); color: var(--text-primary); font-size: 0.9rem;">
                        </div>
                        <div class="history-container">
                            <div class="history-group">
                                <div class="group-label">Today</div>
                                <!-- History items will be injected here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item: Resources -->
                <div class="accordion-item" id="resources-accordion">
                    <div class="accordion-header" onclick="toggleAccordion('resources-accordion')">
                        <span class="header-title">Resources</span>
                        <span class="material-icons-round arrow-icon">chevron_right</span>
                    </div>
                    <div class="accordion-body">
                        <div class="resource-search-container" style="padding: var(--space-sm); padding-bottom: 0;">
                            <input type="text" id="resource-search" placeholder="Search resources..."
                                style="width: 100%; padding: 8px; border-radius: var(--radius-sm); border: 1px solid var(--border-subtle); background: var(--bg-app); color: var(--text-primary);">
                        </div>
                        <div class="resources-list-container" id="resources-list">
                            <div class="empty-resources">
                                <span>No resources found</span>
                            </div>
                            <!-- Resource items will be injected here -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="avatar">U</div>
                    <div class="user-info">
                        <span class="user-name">User</span>
                        <span class="user-role">Pro Plan</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="main-content">
            <!-- Sidebar Toggles -->
            <button id="toggle-left-sidebar" class="sidebar-toggle-btn left" onclick="toggleLeftSidebar()"
                title="Toggle Sidebar">
                <span class="material-icons-round">menu</span>
            </button>
            <button id="toggle-right-sidebar" class="sidebar-toggle-btn right" onclick="toggleRightSidebar()"
                title="Toggle Artifacts">
                <span class="material-icons-round">space_dashboard</span>
            </button>

            <div id="drag-overlay" class="drag-overlay hidden">
                <div class="drag-content">
                    <span class="material-icons-round">file_upload</span>
                    <h3>Drop files to add to context</h3>
                </div>
            </div>

            <div id="chat-feed" class="chat-feed">
                <!-- Welcome / Empty State -->
                <div class="empty-state">
                    <h1>How can I help you today?</h1>
                    <div class="capabilities">
                        <div class="capability-card" onclick="setInput('Draft a technical implementation plan')">
                            <span class="material-icons-round">code</span>
                            <span>Draft a technical implementation plan</span>
                        </div>
                        <div class="capability-card" onclick="setInput('Explain quantum computing to a 5 year old')">
                            <span class="material-icons-round">school</span>
                            <span>Explain quantum computing</span>
                        </div>
                        <div class="capability-card"
                            onclick="setInput('Create a marketing strategy for a new coffee brand')">
                            <span class="material-icons-round">campaign</span>
                            <span>Create a marketing strategy</span>
                        </div>
                    </div>
                </div>
                <!-- Messages will be injected here -->
            </div>

            <!-- Resource Tray (Collapsible) -->
            <div id="resource-tray" class="resource-tray hidden">
                <!-- Attached resources -->
            </div>

            <!-- Composer -->
            <div class="composer-area">
                <div class="composer-container">
                    <div class="composer-tools">
                        <button class="tool-btn" title="Attach File"
                            onclick="document.getElementById('file-upload').click()">
                            <span class="material-icons-round">attach_file</span>
                        </button>
                        <input type="file" id="file-upload" multiple hidden>
                    </div>

                    <textarea id="message-input" placeholder="Message AI..." rows="1"></textarea>

                    <button id="send-btn" class="send-btn" disabled>
                        <span class="material-icons-round">arrow_upward</span>
                    </button>
                </div>
                <div class="footer-text">
                    AI can make mistakes. Please verify important information.
                </div>
            </div>
        </main>

        <!-- Right Sidebar (Dynamic) -->
        <aside class="right-sidebar hidden" id="right-sidebar">
            <div class="rs-header">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <button id="rs-back-btn" class="rs-close-btn hidden" onclick="showArtifactList()"
                        title="Back to List">
                        <span class="material-icons-round">arrow_back</span>
                    </button>
                    <span class="rs-title" id="rs-title">Artifacts</span>
                </div>
                <button class="rs-close-btn" onclick="toggleRightSidebar()">
                    <span class="material-icons-round">close</span>
                </button>
            </div>

            <!-- List View -->
            <div class="rs-content" id="rs-list-view">
                <div class="empty-resources" id="rs-empty-state">No artifacts generated yet.</div>
                <div id="rs-list-container" style="display: flex; flex-direction: column; gap: 8px;"></div>
            </div>

            <!-- Detail View -->
            <div class="rs-content hidden" id="rs-detail-view">
                <!-- Artifact content injected here -->
            </div>
        </aside>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/js/dashboard.js"></script>
</body>

</html>